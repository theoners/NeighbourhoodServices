@using System.Security.Claims
@using Microsoft.AspNetCore.Http.Extensions
@using Microsoft.AspNetCore.Identity
@model NeighbourhoodServices.Web.ViewModels.Announcements.GetAllViewModel;

<div class="hero-wrap hero-wrap-2" style="background-image: url('images/bg_1.jpg');" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container">
        <div class="row no-gutters slider-text align-items-end justify-content-start">
            <div class="col-md-12 ftco-animate text-center mb-5">
                <p class="breadcrumbs mb-0"><span class="mr-3"><a href="index.html">Home <i class="ion-ios-arrow-forward"></i></a></span> <span>Job Post</span></p>
                <h1 class="mb-3 bread">Browse Job</h1>
            </div>
        </div>
    </div>
</div>
@foreach (var announcement in Model.Announcements)
{
    <div class="col-md-12 ftco-animate">
        <div class="job-post-item p-4 d-block d-lg-flex align-items-center">
            <div class="one-third mb-4 mb-md-0">
                <div class="align-items-center">
                    <h2 class="mr-3 text-black"><a href="#">@announcement.Title</a></h2>
                    <span class="subadge">@announcement.ServiceType</span>
                    <div>@announcement.Description</div>
                </div>
                <div class="job-post-item-body d-block d-md-flex">
                    <div class="mr-3"><span class="icon-layers"></span> <a href="#">@announcement.User</a></div>
                    <div><span class="icon-my_location"></span> <span>@announcement.Place</span></div>
                    <div><span class="icon-my_location"></span> <span>@announcement.CreatedOn</span></div>
                    <div><span class="icon-my_location"></span> <span>@announcement.CategoryName</span></div>
                </div>
                <div>


                    @if (User.Claims.FirstOrDefault(c => c.Type == ClaimTypes.Name)?.Value == announcement.User || User.IsInRole("Administrator"))
                    {
                        <button class="btn btn-danger" type="submit">Изтрий</button>
                        <button class="btn btn-secondary" type="submit">Редактирай</button>
                    }
                </div>
                
                <div class="fb-share-button" data-href=" @Context.Request.GetEncodedUrl()" data-layout="button_count" data-size="large"><a target="_blank" href="" class="fb-xfbml-parse-ignore">Споделяне</a></div>

            </div>

            <div class="one-forth ml-auto d-flex align-items-center mt-4 md-md-0">
                <div>
                    <a href="#" class="icon text-center d-flex justify-content-center align-items-center icon mr-2">
                        <span class="icon-heart"></span>
                    </a>
                </div>

                <a asp-controller="Announcements" asp-action="GetDetails" asp-route-id="@announcement.Id" class="btn btn-primary py-2">Детайли</a>
            </div>



        </div>
    </div>
}
<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/bg_BG/sdk.js#xfbml=1&version=v6.0"></script>
